<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="de">
<head>
<title>ImageFlow 0.2</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
<meta name="language" content="de" />
<meta name="description" content="ImageFlow ist eine Bildergallerie in Javascript, angelehnt an Apples CoverFlow."/>
<meta name="keywords" content="ImageFlow, image flow, CoverFlow, cover flow, Javascript, imageflow in javascript, coverflow in javascript" />
<meta name="robots" content="index, follow, noarchive" />
<link rel="shortcut icon" href="favicon.ico" type="image/ico" />
<style type="text/css">
body {
	background-color:#454545;
	color: #fff;
	margin: 0;
	padding: 0;
	text-align: center;
	font-size:100.1%;
	font: 83%/1.4 verdana, arial, helvetica, sans-serif;
}
img { 
	position:absolute; 
	top:0px; 
}
</style>
<script language="JavaScript" type="text/javascript">
<!--
/*
 *	ImageFlow 0.2
 *
 *	This code is based on Michael L. Perrys Cover flow in Javascript.
 *	For he wrote that "You can take this code and use it as your own" [1]
 *	this is my attempt to improve some things. Feel free to use it! If
 *	you have any questions on it leave a message in my shoutbox [2].
 *
 *	[1] http://www.adventuresinsoftware.com/blog/?p=104#comment-1981
 *	[2] http://shoutbox.finnrudolph.de/
 *	
 */

/* Set some variables */
var current = 0;
var target = 0;
var timer = 0;
var captionId = "i1";
var captionTarget = "";

/* Get width of the images div container in px */
function windowWidth()
{
	var width = document.getElementById("images").offsetWidth;
	return width;
}

function step()
{
	if (target < current-1 || target > current+1)
	{
		moveTo(current + (target-current)/3);
		window.setTimeout(step, 50);
		timer = 1;
	}
	else
	{
		timer = 0;
	}
}

function glideTo(x, newCaptionId)
{
	target = x;
	if (timer == 0)
	{
		window.setTimeout(step, 50);
		timer = 1;
	}

	captionId = newCaptionId;
	var caption = document.getElementById(captionId);
	captionTarget.innerHTML = caption.innerHTML;
}


function moveTo(x)
{
	current = x;

	/* do stuff with the images div */
	var padding_left = document.getElementById("imageflow").offsetLeft;
	var div = document.getElementById("images");
	var top = div.offsetTop;
	var width = windowWidth();
	var size = width * 0.5;
	var biggest = width * 0.5;

	/* zIndex is the z-index in css = order of the layers (here images) */
	var zIndex = div.childNodes.length;
	var max = div.childNodes.length;

	for (index = 0; index < max; index++)
	{
		var image = div.childNodes.item(index);
		if (image.nodeType == 1)
		{
			var z = Math.sqrt(10000 + x * x)+100;
			var xs = x / z * size + size;

			
			/* Do not ask what this variable is for *GNA* */
			var gna = 100 / z * biggest;

			if((image.width) > (image.height))
			{
				image.style.left = xs - 67 / z * biggest + padding_left +"px";
				image.style.height = gna + "px";
				image.style.width = "";
			}
			else
			{
				image.style.left = xs - 50 / z * biggest + padding_left + "px";
				image.style.width = gna + "px";
				image.style.height = "";
			}
		
			image.style.top = (width * 0.35 - image.height) + top + "px";
			image.style.zIndex = zIndex;
			if ( x < 0 )
			{
				zIndex++;
			}
			else
			{
				zIndex = zIndex -1;
			}
			x += 150;
		}
	}
}

/* Main Function */
function refresh()
{
	var width = windowWidth();
	var height = width * 0.35;
	var images = document.getElementById("images");
	images.style.height = height + "px";

	/* Text on top through zIndex */
	captionTarget = document.getElementById("captionTarget");
	captionTarget.style.top = images.offsetTop + height + "px";
	captionTarget.style.zIndex = 100;

	var caption = document.getElementById(captionId);
	captionTarget.innerHTML = caption.innerHTML;

	/* Call subFunction */
	moveTo(current);
}
//-->
</script> 
</head>
<body onload="refresh();">
<div style="width:100%">

<div style="width:30%;float:left;margin-top:15px">
	<div style="border-right:solid 1px #666;">
		<b>ChangeLog</b><br/>
		<div style="padding:15px;text-align:left;">
			Version 0.2
			<ul>
				<li>Changed global scaling and positioning: now it scales in relation to the div container "images"</li>
			</ul>
			<br/>
			Version 0.1
			<ul>
				<li>Improved browser compatibility</li>
				<li>Added bottom alignment </li>
				<li>Added correct scaling of different image formats</li>
			</ul>
			<br/>
			<br/>
			For more information on ImageFlow check my <a target="_top" style="color:#fff;" href="http://194.95.111.244/~countzero/myCMS/index.php?c_id=1&amp;s_id=4&amp;tag=ImageFlow">Newsblog on Dragonfly</a>.<br/>
		</div>
	</div>
</div>

<div id="imageflow" style="width:70%;float:right;">

	<h1>ImageFlow 0.2</h1><br/>
	<div id="images">
		<img onclick="glideTo( 0, 'i1')" src="img/DSC00799.jpg" alt="" />
		<img onclick="glideTo( -150, 'i2')" src="img/DSC00862.jpg" alt="" />
		<img onclick="glideTo( -300, 'i3')" src="img/IMG_2362.jpg" alt="" />
		<img onclick="glideTo( -450, 'i4')" src="img/IMG_4645.jpg" alt="" />
		<img onclick="glideTo( -600, 'i5')" src="img/IMG_4654.jpg" alt="" />
		<img onclick="glideTo( -750, 'i6')" src="img/IMG_4654.jpg" alt="" />
		<img onclick="glideTo( -900, 'i7')" src="img/IMG_2362.jpg" alt="" />
		<img onclick="glideTo( -1050, 'i8')" src="img/IMG_4645.jpg" alt="" />
		<img onclick="glideTo( -1200, 'i9')" src="img/IMG_4654.jpg" alt="" />
		<img onclick="glideTo( -1350, 'i10')" src="img/IMG_4654.jpg" alt="" />
	</div>

	<div id="captionTarget" style="padding-top:20px;text-align:center;"></div>

	<div style="display:none;">
		<div id="i1"><b>Image 1</b></div>
		<div id="i2"><b>Image 2</b></div>
		<div id="i3"><b>Image 3</b></div>
		<div id="i4"><b>Image 4</b></div>
		<div id="i5"><b>Image 5</b></div>
		<div id="i6"><b>Image 6</b></div>
		<div id="i7"><b>Image 7</b></div>
		<div id="i8"><b>Image 8</b></div>
		<div id="i9"><b>Image 9</b></div>
		<div id="i10"><b>Image 10</b></div>
	</div>

</div>
<div style="clear:both;"></div>
</div>

<script language="JavaScript" type="text/javascript">
<!--
window.onresize = function() { refresh(); }
refresh();
//-->
</script> 

<!-- The following javascript is Google Analytics trackingcode and has nothing to do with ImageFlow -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-1076251-6";
urchinTracker();
</script>
</body>
</html>