<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>iframe</title>
		<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />
		<link rel="stylesheet" href="iframe03.css" type="text/css" />
		<script type="text/javascript" src="processing.js"></script>
		<script type="text/javascript" src="init.js"></script>
	</head>
	<body>

	<script type="application/processing">
		float[] x = new float[20];
		float[] y = new float[20];
		float segLength = 9;

		void setup() {
		  size(500, 500);
		  smooth(); 
		  strokeWeight(5);
		  stroke(0, 100);
		}

		void draw() {
		  background(226);
		  dragSegment(0, mouseX, mouseY);
		  for(int i=0; i<x.length-1; i++) {
			dragSegment(i+1, x[i], y[i]);
		  }
		}

		void dragSegment(int i, float xin, float yin) {
		  float dx = xin - x[i];
		  float dy = yin - y[i];
		  float angle = atan2(dy, dx);  
		  x[i] = xin - cos(angle) * segLength;
		  y[i] = yin - sin(angle) * segLength;
		  segment(x[i], y[i], angle);
		}

		void segment(float x, float y, float a) {
		  pushMatrix();
		  translate(x, y);
		  rotate(a);
		  line(0, 0, segLength, 0);
		  popMatrix();
		}
		</script><canvas width="500" height="500"></canvas></p> 

	</body>
</html>

